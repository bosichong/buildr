var parserlib={};
(function(){function i(){this._listeners={}}function g(a){this._input=a.replace(/\n\r?/g,"\n");this._col=this._line=1;this._cursor=0}function j(a,b,c){this.col=c;this.line=b;this.message=a}function f(a,b,c,d){this.col=c;this.line=b;this.text=a;this.type=d}function h(a,b){this._reader=a?new g(a.toString()):null;this._token=null;this._tokenData=b;this._lt=[];this._ltIndex=0;this._ltIndexCache=[]}i.prototype={constructor:i,addListener:function(a,b){this._listeners[a]||(this._listeners[a]=[]);this._listeners[a].push(b)},
fire:function(a){"string"==typeof a&&(a={type:a});if("undefined"!=typeof a.target)a.target=this;if("undefined"==typeof a.type)throw Error("Event object missing 'type' property.");if(this._listeners[a.type])for(var b=this._listeners[a.type].concat(),c=0,d=b.length;c<d;c++)b[c].call(this,a)},removeListener:function(a,b){if(this._listeners[a])for(var c=this._listeners[a],d=0,e=c.length;d<e;d++)if(c[d]===b){c.splice(d,1);break}}};g.prototype={constructor:g,getCol:function(){return this._col},getLine:function(){return this._line},
eof:function(){return this._cursor==this._input.length},peek:function(a){var b=null;this._cursor<this._input.length&&(b=this._input.charAt(this._cursor+("undefined"==typeof a?1:a)-1));return b},read:function(){var a=null;if(this._cursor<this._input.length)"\n"==this._input.charAt(this._cursor)?(this._line++,this._col=1):this._col++,a=this._input.charAt(this._cursor++);return a},mark:function(){this._bookmark={cursor:this._cursor,line:this._line,col:this._col}},reset:function(){if(this._bookmark)this._cursor=
this._bookmark.cursor,this._line=this._bookmark.line,this._col=this._bookmark.col,delete this._bookmark},readTo:function(a){for(var b="",c;b.length<a.length||b.lastIndexOf(a)!=b.length-a.length;)if(c=this.read())b+=c;else throw Error('Expected "'+a+'" at line '+this._line+", col "+this._col+".");return b},readWhile:function(a){for(var b="",c=this.read();null!==c&&a(c);)b+=c,c=this.read();return b},readMatch:function(a){var b=this._input.substring(this._cursor),c=null;"string"==typeof a?0===b.indexOf(a)&&
(c=this.readCount(a.length)):a instanceof RegExp&&a.test(b)&&(c=this.readCount(RegExp.lastMatch.length));return c},readCount:function(a){for(var b="";a--;)b+=this.read();return b}};j.prototype=Error();f.fromToken=function(a){return new f(a.value,a.startLine,a.startCol)};f.prototype={constructor:f,valueOf:function(){return this.toString()},toString:function(){return this.text}};h.createTokenData=function(a){var b=[],c={},a=a.concat([]),d=0,e=a.length+1;a.UNKNOWN=-1;for(a.unshift({name:"EOF"});d<e;d++)b.push(a[d].name),
a[a[d].name]=d,a[d].text&&(c[a[d].text]=d);a.name=function(a){return b[a]};a.type=function(a){return c[a]};return a};h.prototype={constructor:h,match:function(a,b){a instanceof Array||(a=[a]);for(var c=this.get(b),d=0,e=a.length;d<e;)if(c==a[d++])return!0;this.unget();return!1},mustMatch:function(a,b){var c;a instanceof Array||(a=[a]);if(!this.match.apply(this,arguments))throw c=this.LT(1),new j("Expected "+this._tokenData[a[0]].name+" at line "+c.startLine+", col "+c.startCol+".",c.startLine,c.startCol);
},advance:function(a,b){for(;0!==this.LA(0)&&!this.match(a,b);)this.get();return this.LA(0)},get:function(a){var b=this._tokenData,c=0,d,e;if(this._lt.length&&0<=this._ltIndex&&this._ltIndex<this._lt.length){c++;this._token=this._lt[this._ltIndex++];for(e=b[this._token.type];void 0!==e.channel&&a!==e.channel&&this._ltIndex<this._lt.length;)this._token=this._lt[this._ltIndex++],e=b[this._token.type],c++;if((void 0===e.channel||a===e.channel)&&this._ltIndex<=this._lt.length)return this._ltIndexCache.push(c),
this._token.type}d=this._getToken();if(-1<d.type&&!b[d.type].hide)d.channel=b[d.type].channel,this._token=d,this._lt.push(d),this._ltIndexCache.push(this._lt.length-this._ltIndex+c),5<this._lt.length&&this._lt.shift(),5<this._ltIndexCache.length&&this._ltIndexCache.shift(),this._ltIndex=this._lt.length;return(e=b[d.type])&&(e.hide||void 0!==e.channel&&a!==e.channel)?this.get(a):d.type},LA:function(a){var b=a,c;if(0<a){if(5<a)throw Error("Too much lookahead.");for(;b;)c=this.get(),b--;for(;b<a;)this.unget(),
b++}else if(0>a)if(this._lt[this._ltIndex+a])c=this._lt[this._ltIndex+a].type;else throw Error("Too much lookbehind.");else c=this._token.type;return c},LT:function(a){this.LA(a);return this._lt[this._ltIndex+a-1]},peek:function(){return this.LA(1)},token:function(){return this._token},tokenName:function(a){return 0>a||a>this._tokenData.length?"UNKNOWN_TOKEN":this._tokenData[a].name},tokenType:function(a){return this._tokenData[a]||-1},unget:function(){if(this._ltIndexCache.length)this._ltIndex-=
this._ltIndexCache.pop(),this._token=this._lt[this._ltIndex-1];else throw Error("Too much lookahead.");}};parserlib.util={StringReader:g,SyntaxError:j,SyntaxUnit:f,EventTarget:i,TokenStreamBase:h}})();
